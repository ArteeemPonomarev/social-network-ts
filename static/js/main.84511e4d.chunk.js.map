{"version":3,"sources":["components/common/FormsControls/FormsControls.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Navbar/Navbar.module.css","components/Profile/MyPosts/MyPosts.module.css","hoc/withAuthRedirect.tsx","redux/dialogs-reducer.ts","components/Profile/MyPosts/Post/Post.module.css","components/Users/Users.module.css","components/Header/Header.module.css","components/common/FormsControls/FormsControls.tsx","api/api.ts","reportWebVitals.ts","api/profile-api.ts","redux/profile-reducer.ts","components/Profile/MyPosts/Post/Post.tsx","logos/download.jpg","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","assets/images/loader.svg","components/common/Pleloader/Preloader.tsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","assets/images/userPhoto.png","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","components/Users/User.tsx","components/Users/Users.tsx","utils/object-helpers.ts","api/users-api.ts","redux/usersReducer.ts","redux/users-selector.ts","components/Users/UsersContainer.tsx","api/auth-api.ts","api/security-api.ts","redux/auth-reducer.ts","components/Login/Login.tsx","redux/app-reducer.ts","redux/redux-store.ts","components/Header/Header.tsx","App.tsx","hoc/withSuspence.tsx","index.tsx","utils/validators/validators.ts"],"names":["module","exports","mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","props","restProps","to","initialState","dialogs","id","name","messages","message","dialogsReducer","action","type","newDialogMessage","Date","getTime","newMessageBody","dialogsActions","addMessage","FormControl","meta","touched","error","children","hasError","className","styles","formControl","Textarea","input","Input","createField","placeholder","validators","component","text","validate","ResultCodes","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","instance","axios","create","withCredentials","baseURL","headers","profileAPI","userId","get","response","data","status","put","file","formData","FormData","append","posts","likesCount","profile","profileActions","newPostText","photos","getUserProfile","dispatch","a","console","log","Post","style","item","src","alt","likecount","maxLength10","maxLength","AddPostFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","required","MyPosts","React","memo","postsElements","map","p","postsBlock","values","addPost","MyPostsContainer","profilePage","Preloader","loader","ProfileStatusWithHooks","useState","editMode","setEditMode","setStatus","useEffect","onDoubleClick","onChange","e","currentTarget","value","onBlur","updateUserStatus","autoFocus","ProfileDataReduxForm","useSelector","color","Object","keys","contacts","key","ProfileData","isOwner","activateEditMode","onClick","fullName","lookingForAJob","lookingForAJobDescription","aboutMe","contactTitle","contactValue","Contact","marginLeft","ProfileInfo","savePhoto","saveProfile","profileInfo","descriptionBlock","userAvatar","large","userPhoto","choosenFiles","target","files","length","initialValues","Profile","ProfileContainer","this","match","params","Number","authorizedUserId","history","push","getUserStatus","refreshProfile","prevProps","prevState","snapshot","compose","userStatus","resultCode","Success","responseData","getState","stopSubmit","_error","Promise","reject","withRouter","News","Music","Settings","User","user","followingInProgress","unfollowUser","followUser","img","small","followed","disabled","some","Users","total","totalUsersCount","current","currentPage","setCurrentPage","itemRender","originalElement","isFetching","users","u","updateObjectInArray","items","itemId","objPropName","newObjProps","usersAPI","getUsers","pageSize","follow","post","unfollow","delete","userActions","setUsers","setTotalUsersCount","totalCount","toggleIsFetching","toggleFollowingProgress","_followUnfollowFlow","apiMethod","actionCreator","createSelector","usersPage","filter","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainerComponent","pageNumber","onSetCurrentPageHandler","bind","page","authApi","email","password","rememberMe","captcha","securityAPI","login","captchaUrl","authActions","payload","authMe","autMeData","getCaptchaUrl","url","LoginReduxForm","undefined","formSummaryError","loginData","CaptchaIsRequired","initialized","appActions","rootReducer","combineReducers","newPost","dialogsPage","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","Header","useDispatch","Layout","span","theme","mode","defaultSelectedKeys","Item","backgroundColor","icon","UserOutlined","DialogsContainer","lazy","App","catchAllUnhandledErrors","promiseRejectionEvent","alert","promise","all","addEventListener","removeEventListener","SubMenu","Menu","Content","Footer","Sider","padding","minHeight","margin","width","defaultOpenKeys","height","title","LaptopOutlined","NotificationOutlined","exact","path","render","Suspense","fallback","UsersContainer","textAlign","SocialNetworkApp","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.84511e4d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2ar26\",\"error\":\"FormsControls_error__LHbt1\",\"formSummaryError\":\"FormsControls_formSummaryError__CKhDj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backgroundImage\":\"ProfileInfo_backgroundImage__49oTI\",\"descriptionBlock\":\"ProfileInfo_descriptionBlock__2FPdE\",\"userAvatar\":\"ProfileInfo_userAvatar__1Mczd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1HWaY\",\"item\":\"Navbar_item__29Ba8\",\"activeLink\":\"Navbar_activeLink__3oJr7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__NbjIO\",\"posts\":\"MyPosts_posts__35B0E\"};","import React, {ComponentType} from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../redux/redux-store';\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport function withAuthRedirect<T>(Component: ComponentType<T>) {\r\n\r\n    const RedirectComponent = (props: MapStatePropsType) => {\r\n\r\n        let {isAuth, ...restProps} = props;\r\n        if (!isAuth) {\r\n            return <Redirect to={'/login'}/>\r\n        }\r\n        return <Component {...restProps as T}/>\r\n    }\r\n\r\n    return connect(mapStateToProps)(RedirectComponent)\r\n\r\n}\r\n\r\n\r\n\r\n","import {BaseThunkType, InferActionsTypes} from \"./redux-store\";\r\n\r\nconst initialState = {\r\n    dialogs: [\r\n        {id: 1, name: 'Artem'},\r\n        {id: 2, name: 'Valera'},\r\n        {id: 3, name: 'Nikita'},\r\n        {id: 4, name: 'Sasha'},\r\n        {id: 5, name: 'Lesha'}\r\n    ] as Array<DialogContentType>,\r\n\r\n    messages: [\r\n        {id: 1, message: 'Hi'},\r\n        {id: 2, message: 'How is your succes?'},\r\n        {id: 3, message: 'Yeeeah'}\r\n    ] as Array<MessageContentType>,\r\n};\r\n\r\n\r\nexport const dialogsReducer = (state: InitialDialogsStateType = initialState, action: DialogsActionsTypes): InitialDialogsStateType => {\r\n    switch (action.type) {\r\n        case 'social-network/dialogs/ADD-DIALOG-MESSAGE':\r\n            const newDialogMessage = {\r\n                id: new Date().getTime(),\r\n                message: action.newMessageBody\r\n            };\r\n            return {...state, messages: [...state.messages, newDialogMessage]};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//action creators\r\nexport const dialogsActions = {\r\n    addMessage: (newMessageBody: string) => ({type: 'social-network/dialogs/ADD-DIALOG-MESSAGE', newMessageBody} as const),\r\n}\r\n\r\n//types\r\ntype DialogContentType = {\r\n    id: number\r\n    name: string\r\n};\r\ntype MessageContentType = {\r\n    id: number\r\n    message: string\r\n};\r\nexport type InitialDialogsStateType = typeof initialState;\r\ntype DialogsActionsTypes =  InferActionsTypes<typeof dialogsActions>;\r\n//type ThunkType = BaseThunkType<DialogsActionsTypes>\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__26MiC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"Users_img__2-e8r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2dK8a\",\"loginBlock\":\"Header_loginBlock__1yWoR\"};","import React from 'react';\r\nimport styles from './FormsControls.module.css'\r\nimport {Field, WrappedFieldMetaProps, WrappedFieldProps} from 'redux-form';\r\nimport {FieldValidatorType} from \"../../../utils/validators/validators\";\r\n\r\n\r\ntype FormsControlPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\n\r\nexport const FormControl:React.FC<FormsControlPropsType>= ({meta: {touched, error}, children}) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={`${styles.formControl} ${hasError ? styles.error : ''}`}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {touched && error && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n   // const {input, meta, child, ...restProps} = props;\r\n    const {input, meta, ...restProps} = props;\r\n    return (\r\n        <FormControl {...props}>\r\n            <textarea {...input} {...restProps}/>\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return (\r\n        <FormControl {...props}>\r\n            <input {...props.input} {...restProps}/>\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport function createField<FormKeysType extends string> (placeholder: string | undefined,\r\n                            name: FormKeysType,\r\n                            validators: Array<FieldValidatorType>,\r\n                            component: any,\r\n                            props?:{type: string},\r\n                            text?: string) {\r\n    return (\r\n        <div>\r\n            <Field\r\n                component={component}\r\n                name={name}\r\n                validate={validators}\r\n                placeholder={placeholder}\r\n                {...props}\r\n            /> {text}\r\n        </div>\r\n    )\r\n}","import axios from 'axios';\r\nimport {UserType} from \"../redux/usersReducer\";\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '9b6aada9-34d3-4135-a32f-7e9aacf37623'\r\n    }\r\n});\r\n\r\n\r\n//types\r\nexport type GetUsersResponseType = {\r\n    error: null | string\r\n    totalCount: number\r\n    items: Array<UserType>\r\n}\r\nexport type ResponseType<D = {}> = {\r\n    resultCode: ResultCodes\r\n    messages: Array<string>,\r\n    data: D\r\n}\r\n\r\nexport enum ResultCodes {\r\n    Success = 0,\r\n    Error = 1,\r\n    CaptchaIsRequired = 10,\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {ProfileType} from \"../redux/profile-reducer\";\r\nimport {ProfileFormDataType} from \"../components/Profile/ProfileInfo/ProfileDataForm\";\r\nimport {instance, ResponseType} from \"./api\";\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId: number) {\r\n        return instance.get<ProfileType>(`profile/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    getUserStatus(userId: number) {\r\n        return instance.get<string>(`profile/status/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<ResponseType>(`profile/status`, {status})\r\n            .then(response => response.data)\r\n    },\r\n    savePhoto(file: File) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", file)\r\n        return instance.put<ResponseType<ProfileType>>(`profile/photo`, formData)\r\n            .then(response => response.data)\r\n    },\r\n    saveProfile(formData: ProfileFormDataType) {\r\n        return instance.put<ResponseType>(`profile`, formData)\r\n            .then(response => response.data)\r\n    }\r\n}","import {AppStateType, BaseThunkType, InferActionsTypes} from './redux-store';\r\nimport {ResultCodes} from '../api/api';\r\nimport {ProfileFormDataType} from \"../components/Profile/ProfileInfo/ProfileDataForm\";\r\nimport {FormAction, stopSubmit} from \"redux-form\";\r\nimport {profileAPI} from \"../api/profile-api\";\r\n\r\n\r\nexport type PostsContentType = {\r\n    id: number\r\n    message: string\r\n    likesCount: number\r\n}\r\ntype ContactsType = {\r\n    github: string\r\n    vk: string\r\n    facebook: string\r\n    instagram: string\r\n    twitter: string\r\n    website: string\r\n    youtube: string\r\n    mainLink: string\r\n}\r\ntype PhotosType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\nexport type ProfileType = {\r\n    aboutMe: string\r\n    userId: number\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    fullName: string\r\n    contacts: ContactsType\r\n    photos: PhotosType\r\n}\r\n\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {id: 1, message: 'Hi, how are you?', likesCount: 12},\r\n        {id: 2, message: 'It is my first post', likesCount: 11},\r\n        {id: 3, message: 'Dadadad', likesCount: 3}\r\n    ] as Array<PostsContentType>,\r\n    profile: null as ProfileType | null,\r\n    status: null as string | null\r\n};\r\n\r\n\r\nexport const profileReducer = (state: InitialProfileStateType = initialState, action: ProfileActionsType): InitialProfileStateType => {\r\n    switch (action.type) {\r\n        case 'DELETE_POST':\r\n            return {...state, posts: state.posts.filter(p => p.id !== action.id)}\r\n        case 'social-network/profile/ADD-POST':\r\n            const newPost: PostsContentType = {\r\n                id: new Date().getTime(),\r\n                message: action.newPostText,\r\n                likesCount: 0\r\n            };\r\n\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n            };\r\n        case 'social-network/profile/SET_USER_PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        case 'social-network/profile/SET_USER_STATUS':\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        case \"social-network/profile/SET_PHOTO_SUCCESS\":\r\n            return {\r\n                ...state,\r\n                //@ts-ignore\r\n                profile: {...state.profile, photos: action.photos}\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const profileActions = {\r\n    addPostAC: (newPostText: string) => ({type: 'social-network/profile/ADD-POST', newPostText} as const),\r\n    deletePostAC: (id: number) => ({type: 'DELETE_POST', id} as const),\r\n    setUserProfile: (profile: ProfileType) => ({type: 'social-network/profile/SET_USER_PROFILE', profile} as const),\r\n    setUserStatus: (status: string) => ({type: 'social-network/profile/SET_USER_STATUS', status} as const),\r\n    savePhotoSuccess: (photos: PhotosType) => ({type: 'social-network/profile/SET_PHOTO_SUCCESS', photos} as const)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//Thunks\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        const response = await profileAPI.getUserProfile(userId)\r\n        dispatch(profileActions.setUserProfile(response))\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const getUserStatus = (userId: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        const userStatus = await profileAPI.getUserStatus(userId)\r\n        dispatch(profileActions.setUserStatus(userStatus))\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const updateUserStatus = (status: string): ThunkType => async (dispatch) => {\r\n    try {\r\n        const responseData = await profileAPI.updateStatus(status)\r\n\r\n        if (responseData.resultCode === ResultCodes.Success) {\r\n            dispatch(profileActions.setUserStatus(status))\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const savePhoto = (file: File): ThunkType => async (dispatch) => {\r\n    try {\r\n        const responseData = await profileAPI.savePhoto(file)\r\n\r\n        if (responseData.resultCode === ResultCodes.Success) {\r\n            dispatch(profileActions.savePhotoSuccess(responseData.data.photos))\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const saveProfile = (formData: ProfileFormDataType): ThunkType =>\r\n    async (dispatch, getState: () => AppStateType) => {\r\n        const userId = getState().auth.userId\r\n        try {\r\n            const responseData = await profileAPI.saveProfile(formData);\r\n            if (responseData.resultCode === ResultCodes.Success) {\r\n                if (userId) {\r\n                    dispatch(getUserProfile(userId))\r\n                }\r\n            } else {\r\n                const message = responseData.messages.length > 0 ? responseData.messages[0] : 'Some error';\r\n                dispatch(stopSubmit('edit-profile', {_error: message}))\r\n                return Promise.reject(message)\r\n            }\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n//types\r\nexport type InitialProfileStateType = typeof initialState;\r\nexport type ProfileActionsType = InferActionsTypes<typeof profileActions>;\r\ntype ThunkType = BaseThunkType<ProfileActionsType | FormAction>;\r\n\r\n","import React from 'react';\r\nimport style from './Post.module.css';\r\nimport logo from '../../../../logos/download.jpg';\r\n\r\ntype MessageType = {\r\n    message: string\r\n    likecount: number\r\n    id: number\r\n}\r\n\r\nconst Post: React.FC<MessageType> = (props) => {\r\n    return (\r\n            <div className={style.item}>\r\n                <img src={logo} alt=\"avatarka\"/>\r\n                <div>{props.message}</div>\r\n                <div>\r\n                    <span>like: {props.likecount}</span>\r\n                </div>\r\n            </div>     \r\n    )\r\n};\r\n\r\nexport default Post;","export default \"data:image/jpeg;base64,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\"","import React from 'react';\r\nimport style from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {MyPostsPropsType} from './MyPostsContainer';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {maxLength, required} from '../../../utils/validators/validators';\r\nimport {Textarea} from '../../common/FormsControls/FormsControls';\r\n\r\ntype AddPostFormDataType = {\r\n    newPostText: string\r\n}\r\n\r\nconst maxLength10 = maxLength(10);\r\n\r\nconst AddPostForm: React.FC<InjectedFormProps<AddPostFormDataType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field\r\n                    component={Textarea}\r\n                    name={'newPostText'}\r\n                    validate={[required, maxLength10]}\r\n                    placeholder={'Type your post...'}/>\r\n            </div>\r\n            <div>\r\n                <button>Add post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddPostFormRedux = reduxForm<AddPostFormDataType>({\r\n    form: 'addPostForm'\r\n})(AddPostForm)\r\n\r\nconst MyPosts = React.memo((props: MyPostsPropsType) => {\r\n\r\n    let postsElements = props.posts.map(p => <Post message={p.message}\r\n                                                   likecount={p.likesCount}\r\n                                                   id={p.id}\r\n                                                   key={p.id}/>);\r\n\r\n    const addPost = (values: AddPostFormDataType) => {\r\n        props.addPost(values.newPostText);\r\n    };\r\n\r\n\r\n    return (\r\n        <div className={style.postsBlock}>\r\n            My Posts\r\n            <AddPostFormRedux onSubmit={addPost}/>\r\n            <div className={style.posts}>\r\n                {postsElements}\r\n            </div>\r\n        </div>\r\n    )\r\n});\r\n\r\nexport default MyPosts;","import React from 'react';\r\nimport {profileActions, PostsContentType} from '../../../redux/profile-reducer';\r\nimport MyPosts from './MyPosts';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../../redux/redux-store';\r\nimport {Dispatch} from 'redux';\r\n\r\ntype MapStatePropsType = {\r\n    posts: Array<PostsContentType>\r\n};\r\n\r\ntype MapDispatchPropsType = {\r\n    addPost: (newPostText: string) => void\r\n};\r\n\r\nexport type MyPostsPropsType = MapStatePropsType & MapDispatchPropsType;\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        posts: state.profilePage.posts\r\n    };\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch: Dispatch):MapDispatchPropsType => {\r\n    return {\r\n        addPost: (newPostText: string) => {\r\n            dispatch(profileActions.addPostAC(newPostText));\r\n        }\r\n    };\r\n};\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;\r\n\r\n// const MyPostsContainer = () => {\r\n//\r\n//     return (\r\n//         <StoreContext.Consumer>\r\n//             {\r\n//                 (store) => {\r\n//\r\n//                     let state = store.getState();\r\n//\r\n//                     const addPostContainer = () => {\r\n//                         store.dispatch(addPostAC());\r\n//                     };\r\n//\r\n//                     const onPostChange = (text: string) => {\r\n//                         store.dispatch(onPostCahngeAC(text));\r\n//                     };\r\n//                     return (\r\n//                         <MyPosts addPost={addPostContainer}\r\n//                                  onPostChange={onPostChange}\r\n//                                  posts={state.profilePage.posts}\r\n//                                  newPostValue={state.profilePage.newPostValue}/>)\r\n//                 }\r\n//             }\r\n//         </StoreContext.Consumer>\r\n//     )\r\n// };","export default __webpack_public_path__ + \"static/media/loader.c0d8e428.svg\";","import React from 'react';\r\nimport loader from './../../../assets/images/loader.svg';\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div>\r\n            <img src={loader} alt=\"loader\"/> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;","import React, {useEffect} from 'react';\r\nimport { ChangeEvent } from 'react';\r\nimport {useState} from 'react';\r\n\r\n\r\ntype ProfileStatusPropsType = {\r\n    status: string | null\r\n    updateUserStatus: (status: string) => void\r\n}\r\n\r\nexport const ProfileStatusWithHooks: React.FC<ProfileStatusPropsType> = (props) => {\r\n\r\n    const [editMode, setEditMode] = useState<boolean>(false);\r\n    const [status, setStatus] = useState<string | null>(props.status);\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const deActivateMode = () => {\r\n        setEditMode(false)\r\n        if (status !== null) {\r\n            props.updateUserStatus(status)\r\n        }\r\n    }\r\n\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n            <div>\r\n                <b>Status</b>: <span onDoubleClick={activateMode}>{props.status || 'Type your status...'}</span>\r\n            </div>\r\n            }\r\n            {editMode &&\r\n            <div>\r\n                <input onChange={onStatusChange}\r\n                       onBlur={deActivateMode}\r\n                       autoFocus\r\n                       value={status === null ? '' : status}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/userPhoto.3759889a.png\";","import React from \"react\";\r\nimport {createField, Input, Textarea} from \"../../common/FormsControls/FormsControls\";\r\nimport {InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../../redux/redux-store\";\r\nimport {ProfileType} from \"../../../redux/profile-reducer\";\r\n\r\n\r\nexport type ProfileFormDataType = {\r\n    fullName: string\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    aboutMe: string\r\n}\r\n\r\nconst ProfileDataForm: React.FC<InjectedFormProps<ProfileFormDataType>> = ({handleSubmit, error}) => {\r\n    const profile = useSelector<AppStateType, ProfileType | null>(state => state.profilePage.profile)\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div><button>Save</button></div>\r\n            {error && <div style={{color: 'red'}}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <b>Full Name</b>: {createField(\"Full name\", \"fullName\", [], Input)}\r\n            </div>\r\n            <div>\r\n                <b>Looking for a jod</b>:\r\n                {createField('', 'lookingForAJob', [], Input, {type: 'checkbox'})}\r\n            </div>\r\n\r\n            <div>\r\n                <b>My professional skills</b>:\r\n                {createField('My professional skills', \"lookingForAJobDescription\", [], Textarea)}\r\n            </div>\r\n            <div>\r\n                <b>About me</b>:\r\n                {createField('About me', 'aboutMe', [], Textarea)}\r\n            </div>\r\n            <div>\r\n                <b>Contact:</b> {profile && Object.keys(profile.contacts).map(key => {\r\n                //@ts-ignore\r\n                return <div key={key}>\r\n                    <b>{key} :</b> {createField(key, 'contacts.' + key, [], Input)}\r\n                </div>\r\n            })}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nexport const ProfileDataReduxForm = reduxForm<ProfileFormDataType>({form: 'edit-profile'})(ProfileDataForm)","import React, {ChangeEvent, useEffect, useState} from 'react';\r\nimport style from './ProfileInfo.module.css';\r\nimport Preloader from './../../common/Pleloader/Preloader'\r\nimport {ProfileType} from '../../../redux/profile-reducer';\r\nimport {ProfileStatusWithHooks} from './ProfileStatusWithHooks';\r\nimport userPhoto from '../../../assets/images/userPhoto.png'\r\nimport {ProfileDataReduxForm, ProfileFormDataType} from \"./ProfileDataForm\";\r\n\r\ntype ProfileInfoPropsType = {\r\n    profile: ProfileType | null\r\n    updateUserStatus: (status: string) => void\r\n    status: string | null\r\n    isOwner: boolean\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (formData: ProfileFormDataType) => void\r\n}\r\n\r\nconst ProfileInfo: React.FC<ProfileInfoPropsType> = (\r\n    {   profile,\r\n        status,\r\n        updateUserStatus,\r\n        isOwner,\r\n        savePhoto,\r\n        saveProfile\r\n    }) => {\r\n\r\n    \r\n    const [editMode, setEditMode] = useState<boolean>(false)\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const onManiPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const choosenFiles = e.target.files\r\n        if (choosenFiles && choosenFiles.length) {\r\n            savePhoto(choosenFiles[0])\r\n        }\r\n    }\r\n\r\n    const onSubmit = (formData: ProfileFormDataType) => {\r\n        saveProfile(formData)\r\n        setEditMode(false) // refactor later\r\n    }\r\n\r\n\r\n    if (!profile) {\r\n        return (\r\n            <Preloader/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className={style.profileInfo}>\r\n            <div className={style.descriptionBlock}>\r\n                <img className={style.userAvatar}\r\n                     src={profile.photos.large || userPhoto}\r\n                     alt=\"user\"/>\r\n                {isOwner && <input type={\"file\"} onChange={onManiPhotoSelected}/>}\r\n                <ProfileStatusWithHooks status={status}\r\n                                        updateUserStatus={updateUserStatus}/>\r\n                {editMode\r\n                    ? <ProfileDataReduxForm initialValues={profile} onSubmit={onSubmit}/>\r\n                    : <ProfileData profile={profile} isOwner={isOwner} activateEditMode={activateEditMode}/>}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\ntype ProfileDataPropsType = {\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n    activateEditMode: () => void\r\n}\r\n\r\nconst ProfileData:React.FC<ProfileDataPropsType> = ({profile, isOwner, activateEditMode}) => {\r\n    return (\r\n        <div>\r\n            {isOwner && <div><button onClick={activateEditMode}>Edit</button></div>}\r\n            <div>\r\n                <b>Full Name</b>: {profile.fullName}\r\n            </div>\r\n            <div>\r\n                <b>Looking for a jod</b>: {profile.lookingForAJob ? 'yes' : 'no'}\r\n            </div>\r\n            {\r\n                profile.lookingForAJob &&\r\n                <div>\r\n                    <b>My professional skills</b>: {profile.lookingForAJobDescription}\r\n                </div>\r\n            }\r\n            <div>\r\n                <b>About me</b>: {profile.aboutMe}\r\n            </div>\r\n            <div>\r\n                <b>Contact:</b> {Object.keys(profile.contacts).map(key => {\r\n                //@ts-ignore\r\n                return <Contact key={key} contactTitle={key} contactValue={profile.contacts[key]}/>\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\ntype ContactPropsType = {\r\n    contactTitle: string\r\n    contactValue: string | null\r\n}\r\n\r\nexport const Contact: React.FC<ContactPropsType> = ({contactValue, contactTitle}) => {\r\n    return (\r\n        <div style={{marginLeft: '20px'}}>\r\n            <b>{contactTitle}</b>: {contactValue}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\r\nimport { ProfileType } from '../../redux/profile-reducer';\r\nimport {ProfileFormDataType} from \"./ProfileInfo/ProfileDataForm\";\r\n\r\ntype ProfilePropsType = {\r\n    profile: ProfileType | null\r\n    updateUserStatus: (status: string) => void\r\n    status: string | null\r\n    isOwner: boolean\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (formData: ProfileFormDataType) => void\r\n}\r\n\r\nconst Profile: React.FC<ProfilePropsType> = (\r\n    {profile,\r\n        status,\r\n        updateUserStatus,\r\n        isOwner,\r\n        savePhoto,\r\n        saveProfile\r\n    }) => {\r\n\r\n    return (\r\n        <div>\r\n            <ProfileInfo profile={profile} isOwner={isOwner} status={status}\r\n                         updateUserStatus={updateUserStatus} savePhoto={savePhoto} saveProfile={saveProfile}/>\r\n            <MyPostsContainer />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Profile;","import React from 'react';\r\nimport Profile from './Profile';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {\r\n    getUserProfile,\r\n    getUserStatus,\r\n    ProfileType,\r\n    savePhoto,\r\n    saveProfile,\r\n    updateUserStatus\r\n} from '../../redux/profile-reducer';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {RouteComponentProps} from 'react-router'\r\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect';\r\nimport {compose} from 'redux';\r\nimport {ProfileFormDataType} from \"./ProfileInfo/ProfileDataForm\";\r\n\r\n\r\ntype MapStatePropsType = {\r\n    profile: ProfileType | null\r\n    status: string | null\r\n    isAuth: boolean\r\n    authorizedUserId: number | null\r\n}\r\ntype MapDispatchPropsType = {\r\n    getUserProfile: (userId: number) => void\r\n    getUserStatus: (userId: number) => void\r\n    updateUserStatus: (status: string) => void\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (formData: ProfileFormDataType) => void\r\n}\r\ntype PathParamsType = {\r\n    userId: string\r\n}\r\nexport type ProfileContainerPropsType = MapStatePropsType\r\n    & MapDispatchPropsType\r\n    & RouteComponentProps<PathParamsType>;\r\n\r\n\r\nclass ProfileContainer extends React.Component<ProfileContainerPropsType> {\r\n    refreshProfile() {\r\n        let userId = +this.props.match.params.userId;\r\n\r\n        if (!userId) {\r\n            userId = Number(this.props.authorizedUserId);\r\n\r\n            if (!userId) {\r\n                this.props.history.push('/login');\r\n            }\r\n        }\r\n        this.props.getUserProfile(userId);\r\n        this.props.getUserStatus(userId);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<ProfileContainerPropsType>, prevState: Readonly<{}>, snapshot?: any) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Profile {...this.props}\r\n                     isOwner={!this.props.match.params.userId}\r\n                     profile={this.props.profile}\r\n                     status={this.props.status}\r\n                     updateUserStatus={this.props.updateUserStatus}\r\n                     savePhoto={this.props.savePhoto}\r\n                     saveProfile={this.props.saveProfile}/>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        profile: state.profilePage.profile,\r\n        status: state.profilePage.status,\r\n        authorizedUserId: state.auth.userId,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect(mapStateToProps, {getUserProfile, getUserStatus, updateUserStatus, savePhoto, saveProfile}),\r\n    withAuthRedirect,\r\n    withRouter\r\n)(ProfileContainer);","import React from 'react';\r\n\r\nconst News = () => {\r\n    return(\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News;","import React from 'react';\r\n\r\nconst Music = () => {\r\n    return(\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;","import React from 'react';\r\n\r\nconst Settings = () => {\r\n    return(\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport style from './Users.module.css'\r\nimport {UserType} from '../../redux/usersReducer';\r\nimport {NavLink} from 'react-router-dom';\r\nimport userPhoto from '../../assets/images/userPhoto.png'\r\n\r\n\r\ntype UserPropsType = {\r\n    user: UserType\r\n    followingInProgress: Array<number>\r\n    followUser: (userId: number) => void\r\n    unfollowUser: (userId: number) => void\r\n}\r\n\r\nexport const User: React.FC<UserPropsType> = ({\r\n                                                  user,\r\n                                                  followingInProgress,\r\n                                                  unfollowUser,\r\n                                                  followUser}) => {\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <NavLink to={`/profile/${user.id}`}>\r\n                    <img className={style.img}\r\n                         src={user.photos.small || userPhoto}\r\n                         alt=\"Dim\"/>\r\n                </NavLink>\r\n            </div>\r\n            <div>\r\n                {\r\n                    user.followed\r\n                        ? <button\r\n                            disabled={followingInProgress.some(id => id === user.id)}\r\n                            onClick={() => {\r\n                                unfollowUser(user.id)\r\n                            }}>Unfollow</button>\r\n                        : <button\r\n                            disabled={followingInProgress.some(id => id === user.id)}\r\n                            onClick={() => {\r\n                                followUser(user.id)\r\n                            }}>Follow</button>\r\n                }\r\n\r\n            </div>\r\n            <div>\r\n                <div><span>name: {user.name}</span></div>\r\n                <div><span>status: {user.status && ''}</span></div>\r\n            </div>\r\n            <div>\r\n                <div><span>Minsk</span></div>\r\n                <div><span>Belarus</span></div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {UserType} from '../../redux/usersReducer';\r\nimport {Paginator} from '../common/Paginator/Paginator';\r\nimport {User} from './User';\r\nimport {Pagination} from \"antd\";\r\nimport Preloader from \"../common/Pleloader/Preloader\";\r\n\r\n\r\ntype UsersPropsType = {\r\n    users: Array<UserType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    setCurrentPage: (pageNumber: number) => void\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => void\r\n    followingInProgress: Array<number>\r\n    followUser: (userId: number) => void\r\n    unfollowUser: (userId: number) => void\r\n    isFetching: boolean\r\n}\r\n\r\nconst Users: React.FC<UsersPropsType> = (props) => {\r\n    function itemRender(current: any, type: any, originalElement: any) {\r\n        if (type === 'prev') {\r\n            return <a>Previous</a>;\r\n        }\r\n        if (type === 'next') {\r\n            return <a>Next</a>;\r\n        }\r\n        return originalElement;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Pagination total={props.totalUsersCount}\r\n                        current={props.currentPage}\r\n                        onChange={props.setCurrentPage} itemRender={itemRender}/>\r\n            {\r\n                props.isFetching\r\n                    ? <Preloader/>\r\n                    : null}\r\n\r\n            {props.users.map(u => <User key={u.id}\r\n                                        followingInProgress={props.followingInProgress}\r\n                                        followUser={props.followUser}\r\n                                        unfollowUser={props.unfollowUser}\r\n                                        user={u}/>)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Users;\r\n","export const updateObjectInArray = (items: Array<any>, itemId: number, objPropName: string, newObjProps: {followed: boolean}) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        }\r\n        return u;\r\n    })\r\n}\r\n","import {GetUsersResponseType, ResponseType, instance} from \"./api\";\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number = 1, pageSize: number = 10) {\r\n        return instance.get<GetUsersResponseType>(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data);\r\n    },\r\n    follow(userId: number) {\r\n        return instance.post<ResponseType>(`follow/${userId}`, {})\r\n            .then(response => response.data)\r\n    },\r\n    unfollow(userId: number) {\r\n        return instance.delete<ResponseType>(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    }\r\n}","import {BaseThunkType, InferActionsTypes} from './redux-store';\r\nimport {ResultCodes} from '../api/api';\r\nimport {Dispatch} from 'redux';\r\nimport {updateObjectInArray} from '../utils/object-helpers';\r\nimport { usersAPI } from '../api/users-api';\r\n\r\n\r\ntype PhotosType = {\r\n    small: null | string\r\n    large: null | string\r\n};\r\n\r\nexport type UserType = {\r\n    id: number\r\n    name: string\r\n    uniqueUrlName: null | string\r\n    photos: PhotosType\r\n    status: null | string\r\n    followed: boolean\r\n}\r\n\r\n\r\nconst initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 10,\r\n    totalUsersCount: 21,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as Array<number>, //array of users ids\r\n};\r\n\r\n\r\n\r\nexport const usersReducer = (state: initialStateType = initialState, action: UsersActionTypes): initialStateType => {\r\n    switch (action.type) {\r\n        case 'social-network/users/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.id, 'id', {followed: true})\r\n            };\r\n        case 'social-network/users/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.id, 'id', {followed: false})\r\n            };\r\n        case 'social-network/users/SET-USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            };\r\n        case 'social-network/users/SET_CURRENT_PAGE':\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n        case 'social-network/users/SET_TOTAL_USERS_COUNT':\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalCount\r\n            }\r\n        case 'social-network/users/TOGGLE_IS_FETCHING':\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case 'social-network/users/TOGGLE_IS_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//Action creators\r\n\r\nexport const userActions = {\r\n    follow: (id: number) => ({type: 'social-network/users/FOLLOW', id} as const),\r\n    unfollow: (id: number) => ({type: 'social-network/users/UNFOLLOW', id} as const),\r\n    setUsers: (users: Array<UserType>) => ({type: 'social-network/users/SET-USERS', users} as const),\r\n    setCurrentPage: (currentPage: number) => {\r\n        return {type: 'social-network/users/SET_CURRENT_PAGE', currentPage} as const\r\n    },\r\n    setTotalUsersCount: (totalCount: number) => {\r\n        return {type: 'social-network/users/SET_TOTAL_USERS_COUNT', totalCount} as const\r\n    },\r\n    toggleIsFetching: (isFetching: boolean) => {\r\n        return {type: 'social-network/users/TOGGLE_IS_FETCHING', isFetching} as const\r\n    },\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => {\r\n        return {type: 'social-network/users/TOGGLE_IS_FOLLOWING_PROGRESS', userId, isFetching} as const\r\n    },\r\n}\r\n\r\n\r\n//Thunk creators\r\nexport const requestUsers = (page: number, pageSize: number): ThunkType => async (dispatch) => {\r\n    dispatch(userActions.toggleIsFetching(true));\r\n    dispatch(userActions.setCurrentPage(page));\r\n\r\n    try {\r\n        const response = await usersAPI.getUsers(page, pageSize)\r\n\r\n        dispatch(userActions.toggleIsFetching(false))\r\n        dispatch(userActions.setTotalUsersCount(response.totalCount))\r\n        dispatch(userActions.setUsers(response.items))\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const _followUnfollowFlow = async (dispatch: Dispatch,\r\n                                          userId: number,\r\n                                          apiMethod: any,\r\n                                          actionCreator: (userID: number) => ReturnType<typeof userActions.follow>\r\n                                              | ReturnType<typeof userActions.unfollow>\r\n) => {\r\n    dispatch(userActions.toggleFollowingProgress(true, userId));\r\n    const response = await apiMethod(userId);\r\n\r\n    if (response.resultCode === ResultCodes.Success) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(userActions.toggleFollowingProgress(false, userId))\r\n}\r\n\r\nexport const followUser = (userId: number): ThunkType => async (dispatch) => {\r\n    _followUnfollowFlow(dispatch, userId, usersAPI.follow.bind(usersAPI), userActions.follow)\r\n}\r\n\r\nexport const unfollowUser = (userId: number): ThunkType => async (dispatch) => {\r\n    _followUnfollowFlow(dispatch, userId, usersAPI.unfollow.bind(usersAPI), userActions.unfollow)\r\n}\r\n\r\n//Action type\r\ntype initialStateType = typeof initialState;\r\nexport type UsersActionTypes = InferActionsTypes<typeof userActions>;\r\ntype ThunkType = BaseThunkType<UsersActionTypes>;\r\n","import { createSelector } from 'reselect';\r\nimport {AppStateType} from './redux-store';\r\nimport {UserType} from './usersReducer';\r\n\r\nconst getUsersSelector = (state: AppStateType): Array<UserType> => state.usersPage.users;\r\n\r\n//getUsers is an example of \"createSelector\" work\r\nexport const getUsers = createSelector([getUsersSelector], (users) => users.filter(u => true));\r\n\r\nexport const getPageSize = (state: AppStateType): number => state.usersPage.pageSize;\r\nexport const getTotalUsersCount = (state: AppStateType): number => state.usersPage.totalUsersCount;\r\nexport const getCurrentPage = (state: AppStateType): number => state.usersPage.currentPage;\r\nexport const getIsFetching = (state: AppStateType): boolean => state.usersPage.isFetching;\r\nexport const getFollowingInProgress = (state: AppStateType): Array<number> => state.usersPage.followingInProgress;","import React from 'react';\r\nimport Users from './Users';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {\r\n    userActions,\r\n    UserType,\r\n    requestUsers, followUser, unfollowUser\r\n} from '../../redux/usersReducer';\r\nimport Preloader from '../common/Pleloader/Preloader';\r\nimport {compose} from 'redux';\r\nimport {\r\n    getCurrentPage, getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers\r\n} from '../../redux/users-selector';\r\nimport {Pagination} from \"antd\";\r\n\r\nexport type MapStatePropsType = {\r\n    users: Array<UserType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: Array<number>\r\n};\r\n\r\nexport type MapDispatchPropsType = {\r\n    setCurrentPage: (currentPage: number) => void\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => void\r\n    getUsers: (currentPage: number, pageSize: number) => void\r\n    followUser: (userId: number) => void\r\n    unfollowUser: (userId: number) => void\r\n};\r\n\r\nexport type UsersContainerPropsType = MapStatePropsType & MapDispatchPropsType;\r\n\r\nclass UsersContainerComponent extends React.Component<UsersContainerPropsType> {\r\n\r\n    componentDidMount(): void {\r\n        const {currentPage, pageSize} = this.props;\r\n        this.props.getUsers(currentPage, pageSize);\r\n    }\r\n\r\n    onSetCurrentPageHandler(pageNumber: number) {\r\n        this.props.setCurrentPage(pageNumber);\r\n        this.props.getUsers(pageNumber, this.props.pageSize);\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Users\r\n                    users={this.props.users}\r\n                    pageSize={this.props.pageSize}\r\n                    totalUsersCount={this.props.totalUsersCount}\r\n                    currentPage={this.props.currentPage}\r\n                    setCurrentPage={this.onSetCurrentPageHandler.bind(this)}\r\n                    toggleFollowingProgress={this.props.toggleFollowingProgress}\r\n                    followingInProgress={this.props.followingInProgress}\r\n                    followUser={this.props.followUser}\r\n                    unfollowUser={this.props.unfollowUser}\r\n                    isFetching={this.props.isFetching}/>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n    };\r\n};\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect<MapStatePropsType,MapDispatchPropsType, {}, AppStateType>(mapStateToProps, {\r\n        setCurrentPage: userActions.setCurrentPage,\r\n        toggleFollowingProgress: userActions.toggleFollowingProgress,\r\n        getUsers: requestUsers,\r\n        followUser,\r\n        unfollowUser,\r\n    })\r\n)(UsersContainerComponent);\r\n\r\n","import {instance, ResponseType} from \"./api\";\r\n\r\nexport const authApi = {\r\n    authMe() {\r\n        return instance.get<ResponseType<{ id: number, email: string, login: string }>>(`auth/me`)\r\n            .then(response => response.data)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean, captcha: null | string = null) {\r\n        return instance.post<ResponseType<{ userId: number }>>(`auth/login`, {password, email, rememberMe, captcha})\r\n            .then(response => response.data)\r\n    },\r\n    logout() {\r\n        return instance.delete<ResponseType>(`auth/login`)\r\n            .then(response => response.data)\r\n    }\r\n}","import {instance} from \"./api\";\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get<{ url: string }>(`security/get-captcha-url`)\r\n            .then(response => response.data)\r\n    }\r\n}","import {BaseThunkType, InferActionsTypes} from './redux-store';\r\nimport {ResultCodes} from '../api/api';\r\nimport {FormAction, stopSubmit} from 'redux-form';\r\nimport {authApi} from \"../api/auth-api\";\r\nimport {securityAPI} from \"../api/security-api\";\r\n\r\n\r\nconst initialState = {\r\n    userId: null as (null | number),\r\n    email: null as null | string,\r\n    login: null as null | string,\r\n    isAuth: false,\r\n    captchaUrl: null as null | string\r\n};\r\n\r\n\r\nexport const authReducer = (state: InitialAuthStateType = initialState, action: AuthActionsType): InitialAuthStateType => {\r\n    switch (action.type) {\r\n        case 'social-network/auth/SET-USER_DATA':\r\n        case 'social-network/auth/GET-CAPTCHA-URL-SUCCESS':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//Action Creators\r\nexport const authActions = {\r\n    setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean) => {\r\n        return {\r\n            type: 'social-network/auth/SET-USER_DATA',\r\n            payload: {login, userId, email, isAuth}\r\n        } as const\r\n    },\r\n    setCaptchaUrl: (captchaUrl: string) => {\r\n        return {\r\n            type: 'social-network/auth/GET-CAPTCHA-URL-SUCCESS',\r\n            payload: {captchaUrl}\r\n        } as const\r\n    },\r\n}\r\n\r\n\r\n\r\n\r\n//Thunks\r\nexport const authMe = (): ThunkType => async (dispatch) => {\r\n    try {\r\n        const autMeData = await authApi.authMe()\r\n\r\n        if (autMeData.resultCode === ResultCodes.Success) {\r\n            let {id, login, email} = autMeData.data;\r\n            dispatch(authActions.setAuthUserData(id, email, login, true));\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const login = (email: string, password: string, rememberMe = false, captcha: string | null = null):\r\n    ThunkType => async (dispatch) => {\r\n    try {\r\n        const loginData = await authApi.login(email, password, rememberMe, captcha)\r\n\r\n        if (loginData.resultCode === ResultCodes.Success) {\r\n            dispatch(authMe())\r\n        } else if (loginData.resultCode === ResultCodes.CaptchaIsRequired) {\r\n            dispatch(getCaptchaUrl())\r\n        } else {\r\n            const message = loginData.messages.length > 0 ? loginData.messages[0] : 'Some error';\r\n            dispatch(stopSubmit('login', {_error: message}))\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType =>\r\n    async (dispatch) => {\r\n        try {\r\n            const {url} = await securityAPI.getCaptchaUrl();\r\n            dispatch(authActions.setCaptchaUrl(url))\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    try {\r\n        const response = await authApi.logout()\r\n\r\n        if (response.resultCode === ResultCodes.Success) {\r\n            dispatch(authActions.setAuthUserData(null, null, null, false))\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n//types\r\ntype InitialAuthStateType = typeof initialState;\r\ntype AuthActionsType = InferActionsTypes<typeof authActions>;\r\ntype ThunkType = BaseThunkType<AuthActionsType | FormAction>","import React from 'react';\r\nimport {InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {createField, Input} from '../common/FormsControls/FormsControls';\r\nimport {required} from '../../utils/validators/validators';\r\nimport {connect} from 'react-redux';\r\nimport {login} from '../../redux/auth-reducer';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport styles from './../common/FormsControls/FormsControls.module.css'\r\n\r\n\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormDataType, LoginFormOwnPropsType> & LoginFormOwnPropsType> = (props) => {\r\n\r\n    const {handleSubmit, error, captchaUrl} = props;\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField<LoginFormDataTypeKeys>('Email', 'email', [required], Input)}\r\n            {createField<LoginFormDataTypeKeys>('password', 'password', [required], Input, {type: 'password'})}\r\n            {createField<LoginFormDataTypeKeys>(undefined, 'rememberMe', [], Input, {type: 'checkbox'},'remember me')}\r\n\r\n            {captchaUrl && <img src={captchaUrl} alt=\"captcha\"/>}\r\n            {captchaUrl && createField<LoginFormDataTypeKeys>('Captcha symbols', 'captcha', [required], Input)}\r\n\r\n            {error && <div className={styles.formSummaryError}>{error}</div>}\r\n\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormDataType, LoginFormOwnPropsType>({form: 'login'})(LoginForm);\r\n\r\n\r\nconst Login: React.FC<MapStateToPropsType & MapDispatchToPropsType> = ({login, isAuth,captchaUrl}) => {\r\n    const onSubmit = (formData: LoginFormDataType) => {\r\n        const {email, password, rememberMe, captcha} = formData;\r\n        login(email, password, rememberMe, captcha);\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        captchaUrl: state.auth.captchaUrl\r\n    }\r\n}\r\n\r\nexport default connect<MapStateToPropsType, MapDispatchToPropsType, {}, AppStateType>(mapStateToProps, {login})(Login);\r\n\r\n//types\r\ntype LoginFormDataType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string\r\n}\r\n\r\ntype LoginFormDataTypeKeys = Extract<keyof LoginFormDataType, string>;\r\n\r\ntype LoginFormOwnPropsType = {\r\n    captchaUrl: string | null\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string) => void\r\n}\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n    captchaUrl: string | null\r\n}","import {BaseThunkType, InferActionsTypes} from './redux-store';\r\nimport {authMe} from './auth-reducer';\r\n\r\n\r\nconst initialState = {\r\n    initialized: false\r\n};\r\n\r\n\r\nexport const appReducer = (state: InitialAppStateType = initialState, action: AppActionsTypes): InitialAppStateType => {\r\n    switch (action.type) {\r\n        case 'social-network/app/INITIALIZED-SUCCESS':\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//Action Creators\r\nexport const appActions = {\r\n    initializedSuccess: () => ({type: 'social-network/app/INITIALIZED-SUCCESS'} as const)\r\n}\r\n\r\n\r\n//Thunks\r\nexport const initializeApp = (): ThunkType  => async (dispatch) => {\r\n    try {\r\n        const promise = dispatch(authMe());\r\n        await Promise.all([promise])\r\n        dispatch(appActions.initializedSuccess())\r\n    } catch(error) {\r\n        console.log(error)\r\n    }\r\n}\r\n//types\r\ntype InitialAppStateType = typeof initialState;\r\nexport type AppActionsTypes = InferActionsTypes<typeof appActions>;\r\ntype ThunkType = BaseThunkType<AppActionsTypes>","import {Action, applyMiddleware, combineReducers, compose, createStore} from 'redux';\r\nimport {\r\n    profileReducer\r\n} from './profile-reducer';\r\nimport {dialogsReducer} from './dialogs-reducer';\r\nimport {usersReducer} from './usersReducer';\r\nimport {authReducer} from './auth-reducer';\r\nimport thunkMiddleware, {ThunkAction} from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\nimport {appReducer} from './app-reducer';\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n});\r\n\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nexport type StoreType = typeof store;\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType>;\r\n\r\nexport type InferActionsTypes<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\n\r\nexport type BaseThunkType<A extends Action = Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\n//@ts-ignore\r\nwindow.store = store\r\n\r\nexport default store;\r\n\r\n","import React from 'react';\r\nimport style from './Header.module.css';\r\nimport {Link} from 'react-router-dom';\r\nimport {Avatar, Button, Col, Layout, Menu, Row} from \"antd\";\r\nimport {UserOutlined} from \"@ant-design/icons\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\n\r\n\r\nexport const Header: React.FC = () => {\r\n\r\n    const isAuth = useSelector<AppStateType, boolean>(state => state.auth.isAuth);\r\n    const login = useSelector<AppStateType, string | null>(state => state.auth.login);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const logoutCallback = () => {\r\n        dispatch(logout())\r\n    }\r\n\r\n    const {Header} = Layout;\r\n\r\n    return <Header className=\"header\">\r\n        <div className=\"logo\"/>\r\n        <Row>\r\n            <Col span={18}>\r\n                <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n                    <Menu.Item key=\"1\">\r\n                        <Link className={style.item} to=\"/users\">Developers</Link>\r\n                    </Menu.Item>\r\n                </Menu>\r\n            </Col>\r\n\r\n            {isAuth\r\n                ? <>\r\n                    <Col span={1}>\r\n                        <Avatar style={{backgroundColor: '#87d068'}} icon={<UserOutlined/>}/>\r\n                    </Col>\r\n                    <Col span={5}>\r\n                        {login} - <Button onClick={logoutCallback}>Log out</Button>\r\n                    </Col>\r\n                </>\r\n                : <Col span={6}>\r\n                    <Button>\r\n                        <Link to={'/login'}>Login</Link>\r\n                    </Button>\r\n                </Col>\r\n            }\r\n\r\n\r\n        </Row>\r\n\r\n    </Header>\r\n\r\n};\r\n\r\n\r\n//return (\r\n//     <header className={style.header}>\r\n//         <img src={logo} alt=\"logo\"/>\r\n//         <div className={style.loginBlock}>\r\n//             {props.isAuth\r\n//                 ? <div>{props.login} - <button onClick={props.logout}>Log out</button></div>\r\n//                 : <NavLink to={'/login'}>Login</NavLink>\r\n//             }\r\n//         </div>\r\n//     </header>\r\n// )\r\n\r\nexport default Header;","import React, {useEffect} from 'react';\nimport ProfileContainer from './components/Profile/ProfileContainer';\nimport News from './components/News/News';\nimport Music from './components/Music/Music';\nimport Settings from './components/Settings/Settings';\nimport {HashRouter, Link, Redirect, Route, Switch} from 'react-router-dom';\nimport './App.css';\nimport UsersContainer from './components/Users/UsersContainer';\nimport Login from './components/Login/Login';\nimport {Provider, useDispatch, useSelector} from 'react-redux';\nimport {initializeApp} from './redux/app-reducer';\nimport store, {AppStateType} from './redux/redux-store';\nimport Preloader from './components/common/Pleloader/Preloader';\nimport {withSuspence} from \"./hoc/withSuspence\";\nimport 'antd/dist/antd.css'\nimport {Breadcrumb, Layout, Menu} from 'antd';\nimport {LaptopOutlined, NotificationOutlined, UserOutlined} from '@ant-design/icons';\nimport style from \"./components/Navbar/Navbar.module.css\";\nimport { Header } from './components/Header/Header';\n\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\n\nconst App = () => {\n\n    const initialized = useSelector<AppStateType, boolean>(state => state.app.initialized)\n    const dispatch = useDispatch();\n    const catchAllUnhandledErrors = (promiseRejectionEvent: any) => {\n        alert(promiseRejectionEvent)\n    }\n\n    useEffect(() => {\n        dispatch(initializeApp());\n        window.addEventListener(\"unhandledrejection\", catchAllUnhandledErrors);\n\n        return () => {\n            window.removeEventListener(\"unhandledrejection\", catchAllUnhandledErrors)\n        }\n    }, [dispatch])\n\n    if (!initialized) {\n        return <Preloader/>\n    }\n    const {SubMenu} = Menu;\n    const {Content, Footer, Sider} = Layout;\n\n    return (\n        <Layout>\n            <Header/>\n            <Content style={{padding: '0 50px', minHeight: '85vh'}}>\n                <Breadcrumb style={{margin: '16px 0'}}>\n                    <Breadcrumb.Item>Home</Breadcrumb.Item>\n                    <Breadcrumb.Item>List</Breadcrumb.Item>\n                    <Breadcrumb.Item>App</Breadcrumb.Item>\n                </Breadcrumb>\n                <Layout className=\"site-layout-background\" style={{padding: '24px 0'}}>\n                    <Sider className=\"site-layout-background\" width={200}>\n                        <Menu\n                            mode=\"inline\"\n                            defaultSelectedKeys={['1']}\n                            defaultOpenKeys={['sub1']}\n                            style={{height: '100%'}}\n                        >\n                            <SubMenu key=\"sub1\" icon={<UserOutlined/>} title=\"My profile\">\n                                <Menu.Item key=\"1\">\n                                    <Link className={style.item} to=\"/profile\">Profile</Link>\n                                </Menu.Item>\n                                <Menu.Item key=\"2\">\n                                    <Link className={style.item} to=\"/dialogs\">Messages</Link>\n                                </Menu.Item>\n                            </SubMenu>\n                            <SubMenu key=\"sub2\" icon={<LaptopOutlined/>} title=\"Developers\">\n                                <Menu.Item key=\"3\">\n                                    <Link className={style.item} to=\"/users\">Developers</Link>\n                                </Menu.Item>\n                            </SubMenu>\n                            <SubMenu key=\"sub3\" icon={<NotificationOutlined/>} title=\"subnav 3\">\n                            </SubMenu>\n                        </Menu>\n                    </Sider>\n                    <Content style={{padding: '0 24px', minHeight: 280}}>\n                        <Switch>\n                            <Route exact path='/' render={() => <Redirect to='/profile'/>}/>\n                            <Route path='/login' render={() => <Login/>}/>\n                            <Route path='/dialogs' render={withSuspence(DialogsContainer)}/>\n                            <Route path='/profile/:userId?' render={() => <ProfileContainer/>}/>\n                            <Route path='/users' render={() => <UsersContainer/>}/>\n                            <Route path='/music' render={() => <Music/>}/>\n                            <Route path='/news' render={() => <News/>}/>\n                            <Route path='/settings' render={() => <Settings/>}/>\n                            <Route path='*' render={() => <div>404 NOT FOUND</div>}/>\n                        </Switch>\n                    </Content>\n                </Layout>\n            </Content>\n            <Footer style={{textAlign: 'center'}}>Social Network 2021</Footer>\n        </Layout>\n    );\n};\n\nexport const SocialNetworkApp = () => {\n    return (\n        <HashRouter>\n            <Provider store={store}>\n                <App/>\n            </Provider>\n        </HashRouter>\n    )\n}\n\n\n","import React from 'react';\r\nimport Preloader from \"../components/common/Pleloader/Preloader\";\r\n\r\n\r\nexport const withSuspence = (Component: any) => {\r\n    return (props: any) => {\r\n        return (\r\n            <React.Suspense fallback={<Preloader/>}>\r\n                <Component {...props}/>\r\n            </React.Suspense>)\r\n    }\r\n}","import React from 'react';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport ReactDOM from 'react-dom';\nimport {SocialNetworkApp} from './App';\n\n\nReactDOM.render(\n    <React.StrictMode>\n        <SocialNetworkApp/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export type FieldValidatorType = (value: string) => string | undefined;\r\n\r\nexport const required: FieldValidatorType = (value) => {\r\n    return value ? undefined : \"Field is required!\";\r\n}\r\n\r\nexport const maxLength = (maxLength: number):FieldValidatorType => (value) =>  {\r\n    return value.length > maxLength ? `Max length is ${maxLength} symbols!` : undefined;\r\n}"],"sourceRoot":""}